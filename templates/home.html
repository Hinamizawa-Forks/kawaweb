{% extends 'base.html' %}
{% block title %} Home {% endblock %}

{% block header %}
<link rel="stylesheet" href="/static/css/pages/home.css">
<link rel="stylesheet" href="/static/css/pages/changelog.css">

{% endblock %}

{% block content %}

{% if flash %}
<div class='noti-banner noti-banner-warning'>
  <div class="container">
    <div class="noti-column">
      <div class='noti-col noti-col-icon'></div>
      <div class='noti-col noti-col-label'>
        <div class='noti-bannertype'>
          {% if status=='error' %}
          Warning
          {% elif status=='success' %}
          Notice
          {% endif %}
        </div>
        <div class='noti-bannertext'>
          {% if status=='error' %}
          Uh oh! Be careful!
          {% elif status=='success' %}
          Hey! Listen!
          {% endif %}
        </div>
      </div>
      <div class='noti-banner-text'>
        {{ flash }}
      </div>
    </div>
  </div>
</div>
{% endif %}

<div class="hero splash p-less is-fullheight-with-navbar" id="home-hero">
  <div class="container flex">
    <div class="columns flex-vcenter">
      <div class="column flex-vcenter flex-lcenter is-size-2-desktop is-size-1-fullhd" id="title">
        <h1 class="title is-spaced is-size-2-desktop is-size-1-fullhd">{{ appName() }}</h1>
        <h2 class="subtitle">
          Kawata is an osu! private server that allows modified clients
          and features to be used according to our rules of course. We allow 
          features such as DT Remover, Aim Assist, HD Remover, etc.
        </h2>
        <h2 class="subtitle" id="timesincestuffbroke">
      
        </h2>

        <script>
          var timestamp = {{ unix_timestamp }};
          var interval = setInterval(function() {
              var now = new Date();
              var diff = Math.floor((now.getTime() / 1000) - timestamp);
              var hours = Math.floor(diff / 3600);
              var minutes = Math.floor((diff % 3600) / 60);
              var seconds = diff % 60;
              document.getElementById('timesincestuffbroke').textContent = "It's been " + hours + " hours, " + minutes + " minutes, and " + seconds + " seconds since something last broke.";
          }, 1000);
          </script>
        {% if not session.authenticated %}
        <div class="buttons">
          <a class="button is-primary" href="/register">
            <strong>Sign up</strong>
          </a>
          <a class="button is-light" href="/login">
            Log in
          </a>
        </div>
        {% endif %}
      </div>
      <div class="column flex flex-lcenter" id="mascot">
        <div class="gulag-avatar"></div>
      </div>
    </div>
  </div>
</div>

<section class="section">
  <div class="container has-text-centered py-4">
    <h2 class="title mb-6">Some of our coolest features</h2>
    <div class="columns has-text-left mb-6">
      <div class="column is-4">
        <div class="columns">
          <div class="column is-2">
            <i class="image is-32x32 fas fa-address-card"></i>
          </div>
          <div class="column is-10">
            <h4 class="title is-spaced is-4">PP for Relax and Autopilot</h4>
            <p class="subtitle is-6">Our server has unique pp formula for relax and autopilot.
              Good at waving your cursor or just smashing your keyboard? Join {{ appName() }} and get a fair reward for
              your skills! Note: You are not allowed to use any kinda of relax hack for autopilot.
            </p>
          </div>
        </div>
      </div>
      <div class="column is-4">
        <div class="columns">
          <div class="column is-2">
            <i class="image is-32x32 fas fa-ambulance"></i>
          </div>
          <div class="column is-10">
            <h4 class="title is-spaced is-4">Free osu!direct</h4>
            <p class="subtitle is-6">You won't have to pay for osu!supporter to have a convenient gameplay experience in
              the
              client - osu!direct is available for everyone! Keep in mind supporting us still grants a huge set of cool
              perks but
              absence of it doesn't affect your game sessions!</p>
          </div>
        </div>
      </div>
      <div class="column is-4">
        <div class="columns">
          <div class="column is-2">
            <i class="image is-32x32 fas fa-archive"></i>
          </div>
          <div class="column is-10">
            <h4 class="title is-spaced is-4">Custom Client</h4>
            <p class="subtitle is-6">We have a Custom Client in the works that is currently in the private beta stage 
              but is close to release. With support for sending cheat information to server, you can be sure that you 
              won't be banned for accidentally breaking our rules, and you can show off your skills if you are one to 
              challenge yourself with extended DT or lack of cheat use on plays. Client Cheats will be enabled by the 
              server so you can't cheat on other servers with it, but don't let that discourage you from trying it out. 
              We also feature many other features and performance improvements that will make your osu! experience more 
              enjoyable.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="section">
  <div class="container has-text-centered py-4">
    <h2 class="title mb-6">Newly Ranked</h2>
    <div class="ranked-block">
      {% for map in rankedmaps %}
      <div class="map">
        <div class="map-info" style="background-image: url(https://assets.ppy.sh/beatmaps/{{ map.set_id }}/covers/card@2x.jpg); position: relative;">
          <div class="map-info-overlay" style="background: linear-gradient(to bottom, hsla(var(--main), 20%, 20%, 0.4), hsla(var(--main), 20%, 10%, 0.7)); height: 100%; width: 100%; position: absolute; z-index: 0;"></div>
          <div class="beatmap-info" style="z-index: 1; position: relative;">
            <div class="map-title">{{ map.title }}</div>
            <div class="map-artist">{{ map.artist }}</div>
          </div>
          <div class="map-diffs" style="z-index: 1; position: relative;">
            {% for diff in map.diffs %}
              <div class="diff-info" title="Version: {{ diff.version }}&#10;Status: {% if diff.status == 2 %}Ranked{% elif diff.status == 3 %}Approved{% elif diff.status == 4 %}Qualified{% elif diff.status == 5 %}Loved{% else %}Pending{% endif %}&#10;CS: {{ diff.cs }}&#10;OD: {{ diff.od }}&#10;HP: {{ diff.hp }}&#10;AR: {{ diff.ar }}&#10;BPM: {{ diff.bpm }}&#10;Stars: {{ diff.diff }}">
                <img src="/static/images/icons/mode-osu.png" class="diff-icon">
              </div>
            {% endfor %}
          </div>
        </div>
        <div class="mod-info">
          <div>
            Ranked by:</br>
            <a href="/u/{{ map.mod.id }}">{{ map.mod.name }}</a>
          </div>
          <img src="https://a.{{domain()}}/{{ map.mod.id }}" class="mod-icon">
        </div>
      </div>
      {% endfor %}
  </div>
</section>

<section class="section">
  <div class="container has-text-centered py-4">
    <h2 class="title mb-6"><a href="/changelog">Changelog</a></h2>
    <div class="changelog-block">
      {% for changelog in changelogs %}
      <div class="changelog {{ changelog.category }}">
        <a class="changelog-author" href="/u/{{ changelog.poster.id }}">
          <img class="changelog-author-avatar" src="https://a.{{domain()}}/{{ changelog.poster.id }}">
          <div class="changelog-author-name">{{ changelog.poster.name }}</div>
        </a>
        <div class="change-block">
          <div class="changelog-header">
            {% if changelog.type == 0 %}
            <div class="changelog-title">Frontend - {{ changelog.category }}</div>
            {% elif changelog.type == 1 %}
            <div class="changelog-title">Backend - {{ changelog.category }}</div>
            {% elif changelog.type == 2 %}
            <div class="changelog-title">Client - {{ changelog.category }}</div>
            {% endif %}
            <div class="changelog-date">{{ changelog.time }}</div>
          </div>
          <div class="changelog-body">
            {{ changelog.content }}
          </div>
        </div>
        
      </div>
      {% endfor %}
    </div>
  </div>
</section>

{% if not session.authenticated %}
<section class="hero splash">
  <div class="hero-body">
    <div class="container has-text-centered">
      <h1 class="title is-spaced">What are you waiting for?</h1>
      <h2 class="subtitle">Join {{ appName() }}! It's risk-free! You won't get your account banned on official servers
        if
        you play here with us! And don't worry, as you can always switch between the official servers and us at any time!</h2>
      <div class="buttons is-centered"><a class="control button is-primary" href="/register">Sign up for free</a><a
          class="control button is-light" href="/login">Login</a></div>
    </div>
  </div>
</section>
{% endif %}

{% endblock %}
